# Ecosystem

Τα αρχεία της άσκησης είναι:
animals.h
carnivores.h
herbivores.h
plants.h
seeded.h
seedless.h
ecosystem.h
tile.h
main.cpp

g++ main.cpp -o main
./main


main.cpp:

Στην main συνάρτηση δημιουργείται ένα οικοσύστημα με μέγεθος  5. Δημιουργείται το έδαφος με την συνάρτηση MapGenerator. Τέλος, τρέχουμε το οικοσύστημα.

ecosystem.h:

Αποτελείται από τα πεδία: terrainSize που αποτελεί το πλάτος του οικοσυστήματος, το terrain που είναι τύπου Tile** και για το οποίο θα μιλήσουμε στην συνέχεια(θα είναι 2d πίνακας που θα περιέχει το έδαφος), dayOfYear την τρέχουσα ημέρα του χρόνου, την τρέχουσα εποχή του χρόνου και τον παράγοντα factor που καθορίζει τις «ημέρες αναπαραγωγής» και τις «ημέρες ανάπτυξης».

Στον constructor το dayOfYear αρχικοποιείται στο 0, δημιουργείται ο 2d πίνακας του εδάφους και αρχικοποιείται το terrainSize.

Η συνάρτηση GenerateRiver αρχικά επιλέγει τυχαία μία θέση του πίνακα που βρίσκεται στην 1η σειρά για να ξεκινήσει η δημιουργία του ποταμιού. Στην συνέχεια προχωράει κάθετα γραμμές στον πίνακα δημιουργώντας το ποτάμι, τοποθετώντας νερό μία θέση δεξιά/αριστερά ή δύο θέσεις δεξιά/ αριστερά σε σχέση με την προηγούμενη σειρά του πίνακα, ανάλογα φυσικά με την μεταβλητή possibility που παίρνει τυχαία τιμή στο διάστημα[0,10] επιλέγουμε την θέση του ποταμιού.

Η συνάρτηση GenerateLake δημιουργεί την λίμνη παίρνει ως όρισμα το μέγεθος της λίμνης. Επιλέγεται τυχαία η θέση της λίμνης, δεν υπάρχει έλεγχος για το ποτάμι που προ-υπάρχει της λίμνης καθώς δεν μας πειράζει να συμπέσει το ένα πάνω στο άλλο αφού και τα δύο αποτελούνται από  νερό (“#”).

Η συνάρτηση GenerateHills δημιουργεί τους λόφους, παίρνει ως όρισμα τον αριθμό των λόφων που θέλουμε να δημιουργηθούν, το οποίο έχει default τιμή 2. Επιλέγεται τυχαία το μέγεθος των λόφων.Επιλέγεται τυχαία η αρχή του κάθε λόφου και γίνεται έλεγχος έτσι ώστε να μην συμπέσει με το ποτάμι και την λίμνη και δημιουργείται ο λόφος με το τυχαίο μέγεθος στα Tile που δεν υπάρχει νερό.

Η συνάρτηση GenerateMeadow δημιουργεί πεδιάδα όπου δεν υπάρχει λόφος, λίμνη και ποτάμι.

Η MapGenerator καλεί τις 4 προαναφερθείσες συναρτήσεις δημιουργίας εδάφους δίνοντας τους τα κατάλληλα ορίσματα όπου απαιτείται.

Η PlacePlants επιλέγει τυχαία τα Tile στα οποία θα δημιουργηθούν φυτά και ανάλογα με το έδαφος και την πιθανότητα που δίνουμε στην επιλογή του κάθε φυτού δημιουργούνται τα αντίστοιχα φυτά.

Η PlaceAnimals επιλέγει τυχαίο αριθμό ζώων που θα δημιουργηθούν σε κάθε Tile (βέβαια έχουμε περιορίσει αυτό τον αριθμό να είναι στο εύρος [1-10] για χάριν ευκολίας της προσομοίωσης). Στη συνέχεια, ανάλογα με το έδαφος και την πιθανότητα που έχουμε αποδώσει σε κάθε ζώο, δημιουργείται το αντίστοιχο ζώο.

Η ChangeGrowthPeriod αλλάζει την περίοδο ανάπτυξης των ζώων και των φυτών όλων των Tile ανάλογα με την εποχή.

Η ChangeBreedingPeriod αλλάζει την περίοδο αναπαραγωγής των ζώων και των φυτών όλων των Tile ανάλογα με την εποχή.

Η ApplySeason αλλάζει την εποχή ανάλογα με την τρέχουσα ημέρα του χρόνου(dayOfYear).

Η DailyReset μεταβάλλει την τρέχουσα ημέρα κατά 1 και καλεί την Reset(Βλέπε παρακάτω) για κάθε Tile.

Η AnimalMovement καλεί την MoveAnimals του κάθε Tile(Βλέπε παρακάτω την λειτουργία).

Η AnimalEating καλεί την AnimalEating του κάθε Tile(Βλέπε παρακάτω).

Η CheckDeadEntities καλεί την CheckDeadEntities του κάθε Tile(Βλέπε παρακάτω).

Oι ΑnimalBreeding και PlantBreeding καλούν αντίστοιχα τις AnimalBreeding και PlantBreeding του κάθε Tile, οι οποίες θα αναλυθούν παρακάτω.

Τέλος, η RunEcosystem τρέχει την προσομοίωση του οικοσυστήματος και παίρνει σαν είσοδο τις ημέρες συνολικές ημέρες της προσομοίωσης. Αρχικά, ορίζει ως τρέχουσα εποχή τον Χειμώνα, στην συνέχεια καλεί τις ChangeGrowthPeriod και ChangeBreedingPeriod. Στην συνέχεια κάθε μέρα σετάρει το οικοσύστημα, καλεί αρχικά την Reset, μετά μετακινεί τα ζώα, τα βάζει να ψάξουν για τροφή/να φάνε, ελέγχει για νεκρά ζώα και φυτά και τα απομακρύνει, αναπαράγει τα ζώα και τα φυτά, αν αυτό απαιτείται. Αν αλλάξει εποχή, αλλάζει την περίοδο ανάπτυξης και αναπαραγωγής, εκτυπώνει το σύστημα, εκτυπώνει τα στατιστικά των ζώων και των φυτών. Όλα τα προηγούμενα εκτελούνται με την κλήση των αντίστοιχων συναρτήσεων.

tile.h:

Αποτελείται από τα πεδία: placePlant δηλαδή αν υπάρχει φυτό στο συγκεκριμένο Tile που αρχικοποιείται  ως 0 στον constructor, το ground το έδαφος δηλαδή του Tile, το plant που είναι pointer σε φυτό(Plants), και ένα vector που αποτελείται από pointers σε ζώα(Animals).

H returnPlant ελέγχει αν υπάρχει φυτό και το επιστρέφει.

Η returnPlacePlant επιστρέφει αν υπάρχει φυτό ή όχι στο συγκεκριμένο Tile.

Η returnGround επιστρέφει το έδαφος.

Η placeGround αρχικοποιεί το έδαφος-ground.

Η PlaceNewPlant αρχικοποιεί το plant και κάνει το placePlant 1.

Η PlaceNewAnimal βάζει ζώο στο vector animals.

Η SetGrowthPeriod ανάλογα με την εποχή που δέχεται ως είσοδο, αλλάζει την περίοδο ανάπτυξης των ζώων και των φυτών του συγκεκριμένου Tile.

Αντίστοιχα, η  SetBreedingPeriod ανάλογα με την εποχή που δέχεται ως είσοδο, αλλάζει την περίοδο αναπαραγωγής των ζώων και των φυτών του συγκεκριμένου Tile.

Η Reset δέχεται την τρέχουσα ημέρα του χρόνου, και για κάθε ζώο επαναρχικοποιείται η πείνα του, στην συνέχεια αν είναι περίοδος ανάπτυξης του ζώου τότε μεταβάλλουμε τα μεγέθη του ανάλογα. Τέλος, αν υπάρχει φυτό και είναι περίοδος ανάπτυξης του, μεταβάλλουμε τον παράγοντα της ζωής του(το αυξάνουμε ανάλογα).

Η MoveAnimals δέχεται το terrain και το terrainSize και για κάθε ζώο καλεί την Move(Βλέπε παρακάτω).

Η AnimalEating δέχεται το terrain και το terrainSize, και φροντίζει να τραφούν τα ζώα του συγκεκριμένου Tile.

Η CheckDeadEntities ελέγχει για νεκρά ζώα και του φυτού, τα αφαιρεί αν είναι νεκρά.

Η AnimalBreeding δέχεται την τρέχουσα ημέρα, ελέγχει για κάθε ζώο αν είναι περίοδος αναπαραγωγής και ανάλογα δημιουργεί τα νεογνά κάθε ζώο αν αυτό απαιτείται και τα βάζει στο vector animals του Tile.

Η PlantBreeding δέχεται την τρέχουσα ημέρα, το έδαφος, το πλάτος, και την τρέχουσα εποχή. Αν υπάρχει φυτό στο συγκεκριμένο Tile και είναι περίοδος αναπαραγωγής επιλέγει τυχαία ένα Tile και ελέγχει αν υπάρχει εκεί φυτό. Αν δεν υπάρχει, αναπάγει το συγκεκριμένο είδος φυτού σε εκείνο το Tile, διαφορετικά το φυτό δεν αναπαράγεται.

plants.h:

Αποτελείται από το όνομα του φυτού(name), τις συντεταγμένες του(x,y), το token(ανάλογα με το είδος του φυτού), το breedingProb την πιθανότητα αναπαραγωγής, την πιθανότητα να αρρωστήσει(illnessProb), την ζωή του(life), τον παράγοντα μεταβολής της ζωής του(lifeFactor), την περίοδο αναπαραγωγής και την ανάπτυξης.Τα περισσότερα  αρχικοποιούνται στον constructor.

Η getx και η gety, επιστρέφουν αντίστοιχα την συντεταγμένη χ, και την συντεταγμένη y.

Υπάρχουν οι: returnSize, Eaten, breeding, changeLifeFactor που είναι virtual συναρτήσεις και θα δούμε παρακάτω την λειτουργία τους.

Η returnToken και η returnName, επιστρέφουν αντίστοιχα το token, και τo name.

Η SetGrowthPeriod και η SetBreedingPeriod, αρχικοποιούν αντίστοιχα την περίοδο ανάπτυξης, και την περίοδο αναπαραγωγής.

Η GrowthPeriod, δέχεται την τρέχουσα ημέρα και ελέγχει αν είναι περίοδος ανάπτυξης του φυτού και επιστρέφει 1, διαφορετικά επιστρέφει 0.

Η CheckLife ελέγχει αν το φυτό είναι ζωντανό και επιστρέφει 1 αν είναι, διαφορετικά 0.

Η BreedingPeriod, δέχεται την τρέχουσα ημέρα και ελέγχει αν είναι περίοδος αναπαραγωγής του φυτού και επιστρέφει 1, διαφορετικά επιστρέφει 0.

seeded.h:

Αποτελούνται από το φύλλωμα(foliage), τους καρπούς(seeds) και το μέγεθος. Όλα τους αρχικοποιούνται στον constuctor. Επίσης, αρχικά αρχικοποιείται η φύση τους ως Plants με initializer list.

Η returnSize επιστρέφει το μέγεθος(size) του φυτού.

Η Eaten δέχεται την ζωή που χάνει το φυτό καθώς και αν το ζώο που τρώει, μπορεί να σκαρφαλώσει. Αν το ζώο μπορεί να σκαρφαλώσει τότε το φυτό χάνει πρώτα μέρος των καρπών του ή όλους και ακολουθεί το φύλλωμα, διαφορετικά το φυτό χάνει από το φύλλωμα μόνο. Επίσης, όταν το φυτό χάνει φύλλωμα χάνει ταυτόχρονα και αντίστοιχες μονάδες ζωής.

Η changeLifeFactor επιλέγει τυχαία έναν αριθμό μικρότερο του 100 και ελέγχει ανάλογα αν το φυτό αρρώστησε ή όχι. Αντίστοιχα επιτρέπει το φυτό να αναπτυχθεί ή όχι, και μεταβάλλει αντίστοιχα την ζωή του, τους καρπούς του, το μέγεθος του και το φύλλωμά του.

Η breeding επιλέγει τυχαία έναν αριθμό μικρότερο του 100 και τον συγκρίνει με την πιθανότητα που έχει το φυτό να μην αναπαραχθεί κανονικά. Αν το φυτό δεν μπορέσει να αναπαραχθεί τότε οι καρποί του μηδενίζονται και μεταβάλλεται(μειώνεται κατά lifeFactor) ανάλογα με το lifeFactor το φύλλωμα του, η ζωή του και το το μέγεθος του. Διαφορετικά, το φυτό αναπαράγεται κανονικά: το μέγεθος του αυξάνεται κατά ένα, η ζωή του και το φύλλωμά του αυξάνονται κατά lifeFactor.

seedless.h:

Δεν έχει κάποιο επιπλέον χαρακτηριστικό. Στον constructor μέσω initializer list αρχικοποιείται η φύση του ως φυτό.

Η Eaten δέχεται την ζωή που χάνει το φυτό καθώς και αν το ζώο που τρώει, μπορεί να σκαρφαλώσει. Tο φυτό χάνει μονάδες ζωής ίσες με LoseLife.

Η changeLifeFactor επιλέγει τυχαία έναν αριθμό μικρότερο του 100 και ελέγχει ανάλογα αν το φυτό αρρώστησε ή όχι. Αντίστοιχα επιτρέπει το φυτό να αναπτυχθεί ή όχι, και μεταβάλλει αντίστοιχα την ζωή του κατά lifeFactor.

Η breeding επιλέγει τυχαία έναν αριθμό μικρότερο του 100 και τον συγκρίνει με την πιθανότητα που έχει το φυτό να μην αναπαραχθεί κανονικά. Αν το φυτό δεν μπορέσει να αναπαραχθεί τότε μεταβάλλεται(μειώνεται κατά lifeFactor) ανάλογα με το lifeFactor η ζωή του. Διαφορετικά, το φυτό αναπαράγεται κανονικά και η ζωή του αυξάνεται κατά lifeFactor.

animals.h:

Το ζώο αποτελείται από το όνομά του(name), το μέγεθος του(size), το πόσες ημέρες έχει να φάει(hungerCount), το φαγητό που έχει καταναλώσει(eatenFood), της μονάδες τροφής που καταναλώνει κάθε ώρα(eatCount), τις συντεταγμένες του(x,y), αν είναι ζωντανό(isAlive), αν είναι πεινασμένο ή όχι(isHungry), αν είναι περίοδος αναπαραγωγής του(inHeat), την ταχύτητα του(speed), αν μπαίνει σε χειμερία νάρκη(hibernates), αν βρίσκεται σε χειμερία νάρκη(inHibernation), το είδος του(token), Και τέλος την περίοδο ανάπτυξης του(growthPeriod) και την περίοδο αναπαραγωγής του(breedingRepPeriod).

Υπάρχει, η returnDefence θα αναλυθεί παρακάτω.

Η killAnimal κάνει το isAlive = 0.

Η CheckIfDead ελέγχει αν το ζώο είναι ζωντανο.

Οι: returnToken, returnSize, returnName, returnSpeed, returnInHibernation επιστρέφουν τα αντίστοιχα πεδία.
Η putInHibernation κάνει το inHibernation = 1, δηλαδή το ζώο βρίσκεται σε χειμερία νάρκη.

Η Place αρχικοποιεί τις συντεταγμένες του ζώου.

Η SetGrowthPeriod και η SetBreedingPeriod αρχικοοιούν τα αντίστοιχα πεδία.

Οι Eat, Move, Raise είναι virtual συναρτήσεις οι λειτουργίες τους θα αναλυθούν παρακάτω.

Η ResetHungry κάνει το isHungry=1, δηλαδή το ζώο είναι πεινασμένο.

Η GrowthPeriod δέχεται την τρέχουσα ημέρα και ελέγχει αν είναι περίοδος ανάπτυξης του ζώου.Επιστρέφει αντίστοιχα 1 αν είναι, 0 διαφορετικά.

Η IncreaseHunger αυξάνει κατά μία τις ημέρες που έχει να τραφεί το ζώο.

Η CheckHunger ελέγχει αν το ζώο έχει να φάει πάνω από το 10ημέρες και επιστρέφει 1(δηλαδή το ζώο πρέπει να πεθάνει), διαφορετικά επιστρέφει 0.

Η CheckBreedingPeriod δέχεται την τρέχουσα ημέρα και ελέγχει αν είναι περίοδος αναπαραγωγής του ζώου, επιστρέφει 1, διαφορετικά επιστρέφει 0.

carbivores.h:

Έχουν δύο επιπλέον χαρακτηριστικά την άμυνα(defence) και την επίθεση(attack). Στον constructor αρχικοποιείται αρχικά η φύση τους ως ζώα και στην συνέχεια αρχικοποιούνται τα επιπλέον χαρακτηριστικά.
 
Η returnDefence επιστρέφει το defence.

Η Eat δέχεται pointer σε ζώο. Ελέγχει αν το ζώο είναι ζωντανό. Αν έχει να φάει λιγότερο από 8 ημέρες τότε ανάλογα με το μέγεθος και την ταχύτητα του ζώου που αποτελεί την  τροφή του, αποφασίζεται αν γίνεται να φαγωθεί. Αν έχει να φάει περισσότερες από 8 ημέρες, τότε μπορεί να φάει και άλλα σαρκοφάγα ζώα όπου πλέον στις συγκρίσεις περιλαμβάνεται και η άμυνα και η επίθεση κάθε ζώου.

Η Move δέχεται to terrainSize και το terrain και μετακινεί τυχαία το ζώο σε άλλο Tile Και το αφαιρεί από το συγκεκριμένο Tile.

Η Raise συμβάλλει στην ανάπτυξη του ζώου, μεταβάλλοντας τα χαρακτηριστικά του(διαφορετικά για κάθε ζώο).

herbivores.h:

Μπορεί να σκαρφαλώνουν(canClimb), απαιτούνε συγκεκριμένες μονάδες τροφής κάθε μέρα(neededFood). Το eatCount δείχνει πόσες μονάδες τροφής θα προστεθούν.

Η Eat δέχεται ένα φυτό. Αν το ζώο έχει να φάει για περισσότερες από 7 ημέρες και το φυτό είναι ζωντανό, μεταβάλλουμε αντίστοιχα τις τιμές του ζώου όσο και αυτές του φυτού.

Η Move δέχεται to terrainSize και το terrain και μετακινεί τυχαία το ζώο σε άλλο Tile Και το αφαιρεί από το συγκεκριμένο Tile.

Η Raise συμβάλλει στην ανάπτυξη του ζώου, μεταβάλλοντας τα χαρακτηριστικά του(διαφορετικά για κάθε ζώο).
